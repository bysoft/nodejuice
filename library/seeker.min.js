(function(n){function o(b){if(!(h+j>g())){k&&clearTimeout(k);k=setTimeout(function(){var a=p(),c=b&&b.touches&&b.touches[0],e=a.scrollTop||c&&c.pageY||0;if(c)q=true;if(q&&b.type=="scroll")return true;r({url:n,type:"text",data:{cmd:"scroll_"+e/a.size*100}});h=g()},j);return true}}function l(b){setTimeout(function(){r({url:n,type:"text",success:function(a){if(a=="update")return location.reload(false);l(1);if(!(h+j>g())){h=g();a=a.split("_");switch(a[0]){case "scroll":var c=p();scrollTo(0,c.size*((+a[1]||
0)/100));break}}},fail:function(){l(1E3)}})},b||2E3)}var g=function(){return+new Date},p=function(){return{height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,scrollTop:document.documentElement.scrollTop||document.body.scrollTop,size:t(document.getElementsByTagName("body")[0],"Height")}},t=function(b,a){var c=0;for(a=a||"Top";b;){c+=b["offset"+a];b=b.offsetParent}return c},m=function(b,a,c){var e=function(f){if(!c(f)){f.cancelBubble=true;f.returnValue=false;
if(f.stopPropagation){f.stopPropagation();f.preventDefault()}}};if(a.addEventListener)a.addEventListener(b,e,false);else if(a.attachEvent)a.attachEvent("on"+b,e);else a["on"+b]=e},u=function(){return document.getElementsByTagName("head")[0]||document.documentElement||document.getElementsByTagName("html")[0]||document.getElementsByTagName("body")[0].parentNode||document.getElementsByTagName("body")[0]},v=function(b,a){if(!b)return"";var c=[],e="";for(e in b)c.push(e+"="+b[e]);return(a.indexOf("?")===
-1?"?":"&")+c.join("&")},w=function(b){return JSON&&JSON.parse(b)||eval("("+b+")")},r=function(b){var a=document.createElement("script"),c="xdr3-"+g(),e=setTimeout(function(){i(1)},b.timeout||3E4),f=b.data||{},x=b.fail||function(){},y=b.success||function(){},s=u(),i=function(d){clearTimeout(e);if(a){d&&x.call(a,unescape(a.src));a.onload=a.onreadystatechange=a.onerror=null;s.removeChild(a)}};a.onload=a.onreadystatechange=function(){var d=this.readyState;if(!d||d=="loaded"||d=="complete"){d=unescape(window[c]||
"");if(!d)return i(1);switch(b.type){case "json":d=w(d);break;case "script":d=eval(d)}y.call(a,d);window[c]="";i(0)}};m("error",a,function(){i(1)});f.unique=c;a.src=b.url+v(f,b.url);setTimeout(function(){s.appendChild(a)},1)},h=g(),j=+"{{speed}}",k=0,q=0;m("touchstart",document,o);m("scroll",window,o);window["-nodeJuice-"]||(window["-nodeJuice-"]=1)&&l(+"{{wait}}")})("http://{{host}}/");
